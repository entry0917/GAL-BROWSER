From 32941d1ff7585afc19b3f948228191a052f5782a Mon Sep 17 00:00:00 2001
From: JunSung Choi <junsungc@gooroom.kr>
Date: Sat, 25 May 2019 18:08:09 +0900
Subject: [PATCH 33/63] Modify ntp(newtab) page

---
 chrome/browser/resources/local_ntp/doodles.css    | 15 +++++++++------
 chrome/browser/resources/local_ntp/doodles.js     |  5 +++--
 chrome/browser/resources/local_ntp/local_ntp.css  |  7 +++++--
 chrome/browser/resources/local_ntp/local_ntp.html |  2 +-
 chrome/browser/resources/local_ntp/local_ntp.js   |  6 ++++++
 5 files changed, 24 insertions(+), 11 deletions(-)

diff --git a/chrome/browser/resources/local_ntp/doodles.css b/chrome/browser/resources/local_ntp/doodles.css
index 6e70f2b5e..2de6b5c40 100644
--- a/chrome/browser/resources/local_ntp/doodles.css
+++ b/chrome/browser/resources/local_ntp/doodles.css
@@ -10,7 +10,9 @@
 }
 
 .non-google-page #logo {
-  display: none;
+  /* GOOROOM
+     2-2. show logo even if the search provider is not google (e.g., naver) */
+  /*display: none;*/
 }
 
 #logo-doodle {
@@ -57,19 +59,20 @@
 
 #logo-default,
 #logo-non-white {
-  background-image: url(../../../../ui/webui/resources/images/google_logo.svg);
+  background-image: url(../../../../chrome/app/theme/gooroom/gooroom_newtab_logo.png);
+
   background-repeat: no-repeat;
   bottom: var(--logo-margin-bottom);
-  height: 92px;
-  left: calc(50% - 272px/2);
+  height: 150px;
+  left: calc(50% - 120px/2);
   position: absolute;
-  width: 272px;
+  width: 120px;
 }
 
 body.alternate-logo #logo-default,
 body.alternate-logo #logo-non-white {
   -webkit-mask-image:
-      url(../../../../ui/webui/resources/images/google_logo.svg);
+      url(../../../../chrome/app/theme/gooroom/gooroom_newtab_logo.png);
   -webkit-mask-repeat: no-repeat;
   -webkit-mask-size: 100%;
   background: #eee;
diff --git a/chrome/browser/resources/local_ntp/doodles.js b/chrome/browser/resources/local_ntp/doodles.js
index b3fed1926..1365eea4a 100644
--- a/chrome/browser/resources/local_ntp/doodles.js
+++ b/chrome/browser/resources/local_ntp/doodles.js
@@ -139,12 +139,13 @@ doodles.init = function() {
   // Load the Doodle. After the first request completes (getting cached
   // data), issue a second request for fresh Doodle data.
   doodles.loadDoodle(/*v=*/ null, function(ddl) {
-    if (ddl === null) {
+      // GOOROOM
+      // Just show gooroom logo not doodle.
+
       // Got no ddl object at all, the feature is probably disabled. Just show
       // the logo.
       doodles.showLogoOrDoodle(/*fromCache=*/ true);
       return;
-    }
 
     // Got a (possibly empty) ddl object. Show logo or doodle.
     doodles.targetDoodle.image = ddl.image || null;
diff --git a/chrome/browser/resources/local_ntp/local_ntp.css b/chrome/browser/resources/local_ntp/local_ntp.css
index 122f2eafa..35d0e6173 100644
--- a/chrome/browser/resources/local_ntp/local_ntp.css
+++ b/chrome/browser/resources/local_ntp/local_ntp.css
@@ -114,10 +114,13 @@ button {
    * unnecessary scrollbar. This height corresponds to MV tile height for a
    * single row, but also works for a row of icons, and works well on small
    * screens (like Pixelbook), as well as high-res screens. */
-  height: 155px;
+/*  height: 155px;
   left: calc(50% - var(--content-width)/2);
   position: absolute;
-  top: calc(50% - 155px);
+  top: calc(50% - 155px);*/
++  /* GOOROOM
++     2-3. Do not align logo in center of the ntp-contents */
++  /*justify-content: center;*/
 }
 
 body.hide-fakebox #fakebox {
diff --git a/chrome/browser/resources/local_ntp/local_ntp.html b/chrome/browser/resources/local_ntp/local_ntp.html
index 5e2e845f9..5f64e54fb 100644
--- a/chrome/browser/resources/local_ntp/local_ntp.html
+++ b/chrome/browser/resources/local_ntp/local_ntp.html
@@ -34,7 +34,7 @@
 <body>
   <div id="custom-bg"></div>
   <!-- Container for the OneGoogleBar HTML. -->
-  <div id="one-google" class="hidden"></div>
+  <div id="one-google" class="hidden" hidden></div>
 
   <div id="ntp-contents">
     <div id="logo">
diff --git a/chrome/browser/resources/local_ntp/local_ntp.js b/chrome/browser/resources/local_ntp/local_ntp.js
index 942e449da..948e9a3b3 100644
--- a/chrome/browser/resources/local_ntp/local_ntp.js
+++ b/chrome/browser/resources/local_ntp/local_ntp.js
@@ -1053,6 +1053,12 @@ function init() {
 
   var searchboxApiHandle = embeddedSearchApiHandle.searchBox;
 
+  // GOOROOM
+  // 2-1. Do not show fakebox if the search provider is not google (e.g., naver) */
+  if (!configData.isGooglePage) {
+    showLogoOrDoodle(null, null, /*fromCache=*/true);
+  }
+
   if (configData.isGooglePage) {
     showSearchSuggestions();
     enableMDIcons();
-- 
2.11.0

