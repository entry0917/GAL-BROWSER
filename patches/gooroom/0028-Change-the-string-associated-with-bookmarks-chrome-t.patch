From 180c8f7810bab75bd29231fbe7f946f27dd7366b Mon Sep 17 00:00:00 2001
From: JunSung Choi <junsungc@gooroom.kr>
Date: Sat, 25 May 2019 18:05:39 +0900
Subject: [PATCH 28/63] Change the string associated with bookmarks (chrome://
 to gooroom://)

---
 chrome/browser/ui/views/bookmarks/bookmark_bar_view.cc  |  9 +++++++++
 .../browser/ui/views/bookmarks/bookmark_editor_view.cc  | 17 +++++++++++++++++
 2 files changed, 26 insertions(+)

diff --git a/chrome/browser/ui/views/bookmarks/bookmark_bar_view.cc b/chrome/browser/ui/views/bookmarks/bookmark_bar_view.cc
index 0f3c4b6b1..f25b7ceee 100644
--- a/chrome/browser/ui/views/bookmarks/bookmark_bar_view.cc
+++ b/chrome/browser/ui/views/bookmarks/bookmark_bar_view.cc
@@ -262,7 +262,16 @@ class BookmarkButton : public BookmarkButtonBase {
       tooltip_text_ = BookmarkBarView::CreateToolTipForURLAndTitle(
           max_tooltip_width_, tooltip_manager->GetFontList(), url_, GetText());
     }
+//Change bookmark tooltip strings. (chrome:// -> gooroom://)
+#if defined(GOOROOM_BUILD)
+    std::string chrometooltip;
+    chrometooltip = base::UTF16ToUTF8(tooltip_text_);
+    if (chrometooltip.find("chrome://") != std::string::npos)
+      chrometooltip.replace(chrometooltip.find("chrome://"),6,"gooroom");
+    *tooltip_text = base::UTF8ToUTF16(chrometooltip);
+#else
     *tooltip_text = tooltip_text_;
+#endif
     return !tooltip_text->empty();
   }
 
diff --git a/chrome/browser/ui/views/bookmarks/bookmark_editor_view.cc b/chrome/browser/ui/views/bookmarks/bookmark_editor_view.cc
index 972e9edb2..f8020c4e0 100644
--- a/chrome/browser/ui/views/bookmarks/bookmark_editor_view.cc
+++ b/chrome/browser/ui/views/bookmarks/bookmark_editor_view.cc
@@ -379,7 +379,17 @@ void BookmarkEditorView::Init() {
         l10n_util::GetStringUTF16(IDS_BOOKMARK_EDITOR_URL_LABEL));
 
     url_tf_ = new views::Textfield;
+//Change bookmark on 'more..' popup page strings (chrome:// to gooroom://)
+#if defined(GOOROOM_BUILD)
+    if (url.scheme() == "chrome") {
+      std::string gooroom_scheme = "gooroom://" + url.GetContent();
+      url_tf_->SetText(base::UTF8ToUTF16(gooroom_scheme));
+    } else {
+      url_tf_->SetText(chrome::FormatBookmarkURLForDisplay(url));
+    }
+#else
     url_tf_->SetText(chrome::FormatBookmarkURLForDisplay(url));
+#endif
     url_tf_->set_controller(this);
     url_tf_->SetAccessibleName(
         l10n_util::GetStringUTF16(IDS_BOOKMARK_AX_EDITOR_URL_LABEL));
@@ -562,6 +572,13 @@ void BookmarkEditorView::ApplyEdits(EditorNode* parent) {
   GURL new_url(GetInputURL());
   base::string16 new_title(title_tf_->text());
 
+//When the bookmark is applied, change the string (gooroom:// to chrome://)
+#if defined(GOOROOM_BUILD)
+  if (new_url.scheme() == "gooroom") {
+    new_url = GURL("chrome://" + new_url.GetContent());
+  }
+#endif
+
   if (!show_tree_) {
     BookmarkEditor::ApplyEditsWithNoFolderChange(
         bb_model_, parent_, details_, new_title, new_url);
-- 
2.11.0

