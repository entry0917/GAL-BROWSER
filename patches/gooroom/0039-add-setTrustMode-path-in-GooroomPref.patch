From 98ae8e065b84b77c7c318b74f6acfcfff090b742 Mon Sep 17 00:00:00 2001
From: JunSung Choi <junsungc@gooroom.kr>
Date: Sat, 25 May 2019 18:15:10 +0900
Subject: [PATCH 39/63] add 'setTrustMode()' path in GooroomPref

---
 gooroom/browser/gooroom_pref.cc | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/gooroom/browser/gooroom_pref.cc b/gooroom/browser/gooroom_pref.cc
index fc630b18b..0004fcf60 100644
--- a/gooroom/browser/gooroom_pref.cc
+++ b/gooroom/browser/gooroom_pref.cc
@@ -79,6 +79,19 @@ void GooroomPref::setup() {
       "/.config/gooroom/untrust";
 
   bool use_user_data_dir = false;
+
+  base::FilePath user_data_dir = cmd->GetSwitchValuePath("user-data-dir");
+  if (!user_data_dir.empty()) {
+    use_user_data_dir = true;
+    if (user_data_dir.AsUTF8Unsafe() ==
+        home_path_dir.AsUTF8Unsafe() + "/.config/gooroom/untrust")
+      base::GetGooroomBase()->setTrustMode(false);
+    else if (user_data_dir.AsUTF8Unsafe() !=
+             home_path_dir.AsUTF8Unsafe() + "/.config/gooroom/trust")
+      base::GetGooroomBase()->setTrustMode(true);
+    return;
+  }
+
   for (base::CommandLine::StringVector::const_iterator it = argv.begin();
        it != argv.end(); ++it) {
     //DLOG(ERROR) << *it;
-- 
2.11.0

