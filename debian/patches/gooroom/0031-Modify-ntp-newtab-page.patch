From 881b71d806c8284c2c364c2586ef3343c0a2af3f Mon Sep 17 00:00:00 2001
From: junsungc <junsungc@gooroom.kr>
Date: Thu, 5 Sep 2019 14:36:01 +0900
Subject: [PATCH 31/78] Modify ntp(newtab) page

---
 chrome/browser/resources/local_ntp/doodles.css    | 15 +++++++++------
 chrome/browser/resources/local_ntp/doodles.js     |  5 +++--
 chrome/browser/resources/local_ntp/local_ntp.css  |  7 +++++--
 chrome/browser/resources/local_ntp/local_ntp.html |  2 +-
 chrome/browser/resources/local_ntp/local_ntp.js   |  6 ++++++
 5 files changed, 24 insertions(+), 11 deletions(-)

diff --git a/chrome/browser/resources/local_ntp/doodles.css b/chrome/browser/resources/local_ntp/doodles.css
index 6e70f2b5e406..2de6b5c40c38 100644
--- a/chrome/browser/resources/local_ntp/doodles.css
+++ b/chrome/browser/resources/local_ntp/doodles.css
@@ -10,7 +10,9 @@
 }
 
 .non-google-page #logo {
-  display: none;
+  /* GOOROOM
+     2-2. show logo even if the search provider is not google (e.g., naver) */
+  /*display: none;*/
 }
 
 #logo-doodle {
@@ -57,19 +59,20 @@
 
 #logo-default,
 #logo-non-white {
-  background-image: url(../../../../ui/webui/resources/images/google_logo.svg);
+  background-image: url(../../../../chrome/app/theme/gooroom/gooroom_newtab_logo.png);
+
   background-repeat: no-repeat;
   bottom: var(--logo-margin-bottom);
-  height: 92px;
-  left: calc(50% - 272px/2);
+  height: 150px;
+  left: calc(50% - 120px/2);
   position: absolute;
-  width: 272px;
+  width: 120px;
 }
 
 body.alternate-logo #logo-default,
 body.alternate-logo #logo-non-white {
   -webkit-mask-image:
-      url(../../../../ui/webui/resources/images/google_logo.svg);
+      url(../../../../chrome/app/theme/gooroom/gooroom_newtab_logo.png);
   -webkit-mask-repeat: no-repeat;
   -webkit-mask-size: 100%;
   background: #eee;
diff --git a/chrome/browser/resources/local_ntp/doodles.js b/chrome/browser/resources/local_ntp/doodles.js
index 77865a37f3f0..36963e55dafa 100644
--- a/chrome/browser/resources/local_ntp/doodles.js
+++ b/chrome/browser/resources/local_ntp/doodles.js
@@ -141,12 +141,13 @@ doodles.init = function() {
   // Load the Doodle. After the first request completes (getting cached
   // data), issue a second request for fresh Doodle data.
   doodles.loadDoodle(/*v=*/ null, function(ddl) {
-    if (ddl === null) {
+      // GOOROOM
+      // Just show gooroom logo not doodle.
+
       // Got no ddl object at all, the feature is probably disabled. Just show
       // the logo.
       doodles.showLogoOrDoodle(/*fromCache=*/ true);
       return;
-    }
 
     // Got a (possibly empty) ddl object. Show logo or doodle.
     doodles.targetDoodle.image = ddl.image || null;
diff --git a/chrome/browser/resources/local_ntp/local_ntp.css b/chrome/browser/resources/local_ntp/local_ntp.css
index 168a37d7d58e..2d90c8161ab4 100644
--- a/chrome/browser/resources/local_ntp/local_ntp.css
+++ b/chrome/browser/resources/local_ntp/local_ntp.css
@@ -113,10 +113,13 @@ button {
    * unnecessary scrollbar. This height corresponds to MV tile height for a
    * single row, but also works for a row of icons, and works well on small
    * screens (like Pixelbook), as well as high-res screens. */
-  height: 155px;
+/*  height: 155px;
   left: calc(50% - var(--shortcuts-width)/2);
   position: absolute;
-  top: calc(50% - 155px);
+  top: calc(50% - 155px);*/
+  /* GOOROOM
+     2-3. Do not align logo in center of the ntp-contents */
+  /*justify-content: center;*/
 }
 
 body.hide-fakebox #fakebox {
diff --git a/chrome/browser/resources/local_ntp/local_ntp.html b/chrome/browser/resources/local_ntp/local_ntp.html
index 5724a10816f7..0f6a35f83746 100644
--- a/chrome/browser/resources/local_ntp/local_ntp.html
+++ b/chrome/browser/resources/local_ntp/local_ntp.html
@@ -33,7 +33,7 @@
 <body>
   <div id="custom-bg"></div>
   <!-- Container for the OneGoogleBar HTML. -->
-  <div id="one-google"></div>
+  <div id="one-google" hidden></div>
 
   <div id="ntp-contents">
     <div id="logo">
diff --git a/chrome/browser/resources/local_ntp/local_ntp.js b/chrome/browser/resources/local_ntp/local_ntp.js
index b0cb00243331..abbdf650f67e 100644
--- a/chrome/browser/resources/local_ntp/local_ntp.js
+++ b/chrome/browser/resources/local_ntp/local_ntp.js
@@ -1118,6 +1118,12 @@ function init() {
 
   const searchboxApiHandle = embeddedSearchApiHandle.searchBox;
 
+  // GOOROOM
+  // 2-1. Do not show fakebox if the search provider is not google (e.g., naver) */
+  if (!configData.isGooglePage) {
+    showLogoOrDoodle(null, null, /*fromCache=*/true);
+  }
+
   if (configData.isGooglePage) {
     requestAndInsertGoogleResources();
     animations.addRippleAnimations();
-- 
2.20.1

