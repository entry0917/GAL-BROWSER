From c6b6963e4d22fecdfda4769c237ac30bb2d07d98 Mon Sep 17 00:00:00 2001
From: JunSung Choi <junsungc@gooroom.kr>
Date: Fri, 24 May 2019 20:36:12 +0900
Subject: [PATCH 16/63] Change chrome:// scheme to gooroom:// scheme for
 extensions.chrome_url_overrides

---
 chrome/browser/extensions/extension_web_ui.cc | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/chrome/browser/extensions/extension_web_ui.cc b/chrome/browser/extensions/extension_web_ui.cc
index dcdbe011f..610d613f8 100644
--- a/chrome/browser/extensions/extension_web_ui.cc
+++ b/chrome/browser/extensions/extension_web_ui.cc
@@ -359,8 +359,13 @@ void ExtensionWebUI::RegisterProfilePrefs(
 bool ExtensionWebUI::HandleChromeURLOverride(
     GURL* url,
     content::BrowserContext* browser_context) {
+#if defined(GOOROOM_BUILD)
+  if (!url->SchemeIs(content::kGooroomUIScheme))
+    return false;
+#else
   if (!url->SchemeIs(content::kChromeUIScheme))
     return false;
+#endif
 
   Profile* profile = Profile::FromBrowserContext(browser_context);
   const base::DictionaryValue* overrides =
@@ -451,7 +456,11 @@ bool ExtensionWebUI::HandleChromeURLOverrideReverse(
         continue;
       if (base::StartsWith(url->spec(), override,
                            base::CompareCase::SENSITIVE)) {
+#if defined(GOOROOM_BUILD)
+        GURL original_url(content::kGooroomUIScheme + std::string("://") +
+#else
         GURL original_url(content::kChromeUIScheme + std::string("://") +
+#endif
                           dict_iter.key() +
                           url->spec().substr(override.length()));
         *url = original_url;
-- 
2.11.0

